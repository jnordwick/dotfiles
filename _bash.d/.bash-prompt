
[[ $- != *i* ]] && return

export GIT_PS1_SHOWCOLORHINTS=1
export GIT_PS1_SHOWDIRTYSTATE=1
export GIT_PS1_SHOWSTASHSTATE=1
export GIT_PS1_SHOWUNTRACKEDFILES=1
export GIT_PS1_SHOWUPSTREAM=auto

source ~/.git-prompt.sh

#
# exit status
#
p_exit_stat=''
function pr_exit_status {
    local last=$?
    local fgcolor=$(( $last == 0 ? 32 : 31 ))
    printf -v p_exit_stat "[\[\e[%im\]%3i\[\e[0m\]]" $fgcolor $last
}

function full_prompt {
    pr_exit_status
    __git_ps1 "$p_exit_stat\w" "\\\$ "
    p_exit_stat=''
}

PROMPT_COMMAND='full_prompt'


